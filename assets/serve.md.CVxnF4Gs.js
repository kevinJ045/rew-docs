import{_ as s,c as i,o as e,a6 as a}from"./chunks/framework.MkVtTltr.js";const u=JSON.parse('{"title":"Module serve","description":"","frontmatter":{},"headers":[],"relativePath":"serve.md","filePath":"serve.md"}'),t={name:"serve.md"},n=a(`<h1 id="module-serve" tabindex="-1">Module <code>serve</code> <a class="header-anchor" href="#module-serve" aria-label="Permalink to &quot;Module \`serve\`&quot;">​</a></h1><p>The <code>serve</code> module is a basic server module used to create and control an HTTP server. It leverages <a href="https://itty.dev/itty-router/" target="_blank" rel="noreferrer">IttyRouter</a> for routing.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>The <code>serve</code> module simplifies the process of creating an HTTP server by providing a streamlined interface for handling requests, managing routes, and serving files. It includes methods for starting the server, setting the port, and logging messages.</p><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h2><p>Here&#39;s a quick example of setting up a basic server using the <code>serve</code> module:</p><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> imp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;serve&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Hello, World!&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .listen</span></span></code></pre></div><h3 id="explanation" tabindex="-1">Explanation <a class="header-anchor" href="#explanation" aria-label="Permalink to &quot;Explanation&quot;">​</a></h3><ul><li><strong><code>imp &#39;serve&#39;</code></strong>: Imports the <code>ModuleServe</code> class.</li><li><strong><code>Svr::create</code></strong>: Creates a new server instance.</li><li><strong><code>fetch: () -&gt; Svr::text &quot;Hello, World!&quot;</code></strong>: Defines a <code>fetch</code> function to handle incoming requests and return a plain text response.</li><li><strong><code>.port 3000</code></strong>: Sets the server to listen on port 3000.</li><li><strong><code>.listen</code></strong>: Starts the server and begins listening for requests.</li></ul><h2 id="api-reference" tabindex="-1">API Reference <a class="header-anchor" href="#api-reference" aria-label="Permalink to &quot;API Reference&quot;">​</a></h2><h3 id="svr-create-options" tabindex="-1"><code>Svr::create(options)</code> <a class="header-anchor" href="#svr-create-options" aria-label="Permalink to &quot;\`Svr::create(options)\`&quot;">​</a></h3><p>Creates and configures a new server instance.</p><h4 id="parameters" tabindex="-1">Parameters: <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;Parameters:&quot;">​</a></h4><ul><li><strong><code>options</code></strong>: An object with the following optional properties: <ul><li><strong><code>handler</code></strong>: A function <code>(req, res) -&gt;</code> to handle requests directly. Overrides <code>fetch</code> if both are provided.</li><li><strong><code>routers</code></strong>: An array of routers to be used by the server.</li><li><strong><code>fetch</code></strong>: A function <code>(req) -&gt; ResponseType</code> or <code>(req) -&gt; Promise&lt;ResponseType&gt;</code> to fetch responses for requests.</li></ul></li></ul><h4 id="returns" tabindex="-1">Returns: <a class="header-anchor" href="#returns" aria-label="Permalink to &quot;Returns:&quot;">​</a></h4><ul><li>A <code>ModuleServeServer</code> instance with methods to set up and control the server.</li></ul><h4 id="example" tabindex="-1">Example: <a class="header-anchor" href="#example" aria-label="Permalink to &quot;Example:&quot;">​</a></h4><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">server</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">create</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (req) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Hello from Fetch&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8080</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .listen</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Server running on port $port&quot;</span></span></code></pre></div><h3 id="svr-createfilerouter-options" tabindex="-1"><code>Svr::createFileRouter(options)</code> <a class="header-anchor" href="#svr-createfilerouter-options" aria-label="Permalink to &quot;\`Svr::createFileRouter(options)\`&quot;">​</a></h3><p>Creates a file router to serve files from a directory based on request paths.</p><h4 id="parameters-1" tabindex="-1">Parameters: <a class="header-anchor" href="#parameters-1" aria-label="Permalink to &quot;Parameters:&quot;">​</a></h4><ul><li><strong><code>options</code></strong>: An object with the following properties: <ul><li><strong><code>root</code></strong>: The root directory for file serving.</li><li><strong><code>basePath</code></strong>: (Optional) The base path for routing.</li><li><strong><code>resolveExtensions</code></strong>: (Optional) An array of file extensions to resolve.</li><li><strong><code>bundlerOptions</code></strong>: (Optional) Options for the bundler.</li><li><strong><code>bundlerEntry</code></strong>: (Optional) Custom function for bundler entry.</li><li><strong><code>ssrBundlerEntry</code></strong>: (Optional) Custom function for SSR bundler entry.</li><li><strong><code>onError</code></strong>: (Optional) Function to handle errors.</li></ul></li></ul><h4 id="returns-1" tabindex="-1">Returns: <a class="header-anchor" href="#returns-1" aria-label="Permalink to &quot;Returns:&quot;">​</a></h4><ul><li>A function <code>(req) -&gt; ResponseType | Promise&lt;ResponseType&gt;</code> for handling file requests.</li></ul><h4 id="example-1" tabindex="-1">Example: <a class="header-anchor" href="#example-1" aria-label="Permalink to &quot;Example:&quot;">​</a></h4><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fileRouter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">createFileRouter</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  root</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./app&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">server</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> fetch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileRouter</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .listen</span></span></code></pre></div><h4 id="usage-with-routers" tabindex="-1">Usage with routers <a class="header-anchor" href="#usage-with-routers" aria-label="Permalink to &quot;Usage with routers&quot;">​</a></h4><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">router</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">router</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fileRouter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">createFileRouter</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  root</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./app&#39;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  basePath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/app&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">router.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">all</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/app&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fileRouter</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">server</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> fetch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> router.fetch</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .listen</span></span></code></pre></div><h3 id="renderable-files" tabindex="-1">Renderable Files <a class="header-anchor" href="#renderable-files" aria-label="Permalink to &quot;Renderable Files&quot;">​</a></h3><p>File routers defined in the <code>serve</code> module are designed to handle different types of files and scenarios based on the naming conventions and their content.</p><h4 id="_1-path-route-coffee-js" tabindex="-1">1. <code>path/route.[coffee|js]</code> <a class="header-anchor" href="#_1-path-route-coffee-js" aria-label="Permalink to &quot;1. \`path/route.[coffee|js]\`&quot;">​</a></h4><p>If a file named <code>route.coffee</code> or <code>route.js</code> exists in the specified path (<code>path</code>), the file router will import it. This file is expected to contain route handlers or middleware logic that defines how incoming requests to specific routes should be processed and responded to.</p><ul><li><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;This will be returned on get\`</span></span></code></pre></div></li></ul><h4 id="_2-path-page-coffee-js-jsx" tabindex="-1">2. <code>path/page.[coffee|js|jsx]</code> <a class="header-anchor" href="#_2-path-page-coffee-js-jsx" aria-label="Permalink to &quot;2. \`path/page.[coffee|js|jsx]\`&quot;">​</a></h4><p>When a file named <code>page.coffee</code>, <code>page.js</code>, or <code>page.jsx</code> exists in the specified path (<code>path</code>), the file router treats it as a page that needs to be rendered into HTML. Here&#39;s how it&#39;s processed:</p><ul><li><p><strong>Bundle and Render</strong>: The file, along with any layout files associated with it, is bundled using the <code>web</code> module&#39;s bundling capabilities (typically via <code>bundle()</code> method). This step prepares the script that will be executed on the client side to render the page dynamically.</p></li><li><p><strong>Usage of <code>render()</code> Function</strong>: The <code>render()</code> function is called during this process. It&#39;s responsible for generating the HTML content of the page. Here&#39;s a typical pattern of how <code>render()</code> might be used:</p><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> render</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> document</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">createElement</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;div&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  div.innerText </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Hello&#39;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  document</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.body.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> div</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  div</span></span></code></pre></div></li></ul><h4 id="_3-path-page-s-coffee-js-jsx" tabindex="-1">3. <code>path/page.s.[coffee|js|jsx]</code> <a class="header-anchor" href="#_3-path-page-s-coffee-js-jsx" aria-label="Permalink to &quot;3. \`path/page.s.[coffee|js|jsx]\`&quot;">​</a></h4><p>If a file named <code>page.s.coffee</code>, <code>page.s.js</code>, or <code>page.s.jsx</code> exists, it indicates that Server-Side Rendering (SSR) is enabled for this page. Here&#39;s how it&#39;s processed:</p><ul><li><p><strong>SSR Bundling and Rendering</strong>: Similar to the previous scenario, but with a focus on server-side rendering. This involves:</p><ul><li>Calling <code>render()</code> function within the SSR context to generate the HTML content server-side.</li></ul><p>Here&#39;s a conceptual example of how SSR and File Router might be used:</p><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># @jsx Web.prototype.createElement</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">Web</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> imp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;web&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> render</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Hello&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div></li></ul><h3 id="render-function-call" tabindex="-1"><code>render()</code> Function Call <a class="header-anchor" href="#render-function-call" aria-label="Permalink to &quot;\`render()\` Function Call&quot;">​</a></h3><p>The <code>render()</code> function plays a crucial role in both client-side and server-side rendering scenarios:</p><ul><li><p><strong>Client-Side Rendering</strong>: When bundling <code>page.coffee</code>, <code>page.js</code>, or <code>page.jsx</code>, <code>render()</code> is called to generate HTML content that will be dynamically inserted into the DOM on the client side.</p></li><li><p><strong>Server-Side Rendering</strong>: When handling <code>page.s.coffee</code>, <code>page.s.js</code>, or <code>page.s.jsx</code>, <code>render()</code> is used within the SSR context. It generates the HTML content on the server side, which is then sent as a fully rendered page to the client.</p></li></ul><h2 id="props-structure" tabindex="-1">Props Structure <a class="header-anchor" href="#props-structure" aria-label="Permalink to &quot;Props Structure&quot;">​</a></h2><p>The <code>props</code> structure is utilized differently based on whether it&#39;s used for CSR, SSR, or within <code>route.coffee</code>. Here&#39;s a detailed explanation of each key within the <code>props</code> structure:</p><h4 id="common-keys" tabindex="-1">Common Keys <a class="header-anchor" href="#common-keys" aria-label="Permalink to &quot;Common Keys&quot;">​</a></h4><ul><li><strong><code>url</code></strong>: Represents the current URL of the page being rendered.</li><li><strong><code>query</code></strong>: Contains the current page to be rendered(only on SSR).</li><li><strong><code>page</code></strong>: Contains the query parameters parsed from the URL.</li><li><strong><code>method</code></strong>: Specifies the HTTP method used in the request (e.g., GET, POST).</li><li><strong><code>params</code></strong>: Holds route parameters extracted from the URL path. Parameters can be defined using dynamic segments (e.g., <code>/home/:id</code>) or folder-based routing (e.g., <code>root/[slug]</code> where <code>[slug]</code> is a parameter).</li></ul><h4 id="key-specific-to-routes-route-coffee" tabindex="-1">Key Specific to Routes (<code>route.coffee</code>) <a class="header-anchor" href="#key-specific-to-routes-route-coffee" aria-label="Permalink to &quot;Key Specific to Routes (\`route.coffee\`)&quot;">​</a></h4><ul><li><strong><code>page</code></strong>: Refers to the page or component that is intended to be rendered. This allows routes to determine which page component to render based on the requested URL and parameters.</li></ul><h3 id="usage-in-different-contexts" tabindex="-1">Usage in Different Contexts <a class="header-anchor" href="#usage-in-different-contexts" aria-label="Permalink to &quot;Usage in Different Contexts&quot;">​</a></h3><h4 id="client-side-rendering-csr" tabindex="-1">Client-Side Rendering (CSR) <a class="header-anchor" href="#client-side-rendering-csr" aria-label="Permalink to &quot;Client-Side Rendering (CSR)&quot;">​</a></h4><p>In client-side rendering, the <code>render()</code> function is typically exported from <code>page.coffee</code>, <code>page.js</code>, or <code>page.jsx</code>. It accepts <code>props</code> as its sole parameter since it operates without direct access to the server request object. Here’s how it looks in CoffeeScript:</p><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Example in page.coffee or page.js or page.jsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> render</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (props) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props.url)     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Outputs current URL</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props.query)   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Outputs query parameters</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props.method)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Outputs HTTP method (e.g., GET)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props.params)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Outputs route parameters</span></span></code></pre></div><ul><li><strong>When on Layout</strong>:<div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Example in layout.coffee or layout.js or layout.jsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> render</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (props, previousRender) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> props, previousRender</span></span></code></pre></div></li></ul><h4 id="server-side-rendering-ssr" tabindex="-1">Server-Side Rendering (SSR) <a class="header-anchor" href="#server-side-rendering-ssr" aria-label="Permalink to &quot;Server-Side Rendering (SSR)&quot;">​</a></h4><p>For server-side rendering, the <code>render()</code> function is exported from <code>page.s.coffee</code>, <code>page.s.js</code>, or <code>page.s.jsx</code>. It accepts both the <code>request</code> object and <code>props</code>. This allows SSR to access server-specific details along with the rendering parameters. Here’s an example in CoffeeScript:</p><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Example in page.s.coffee or page.s.js or page.s.jsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> render</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (req, props) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req.headers)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Access server request headers</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props.url)    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Outputs current URL</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props.query)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Outputs query parameters</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props.method) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Outputs HTTP method (e.g., GET)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props.params) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Outputs route parameters</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  props.page.add &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Example&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Adds to the currently rending page</span></span></code></pre></div><ul><li><strong>When on Layout</strong>:<div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Example in layout.s.coffee or layout.s.js or layout.s.jsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> render</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (props, previousRender) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  props.page.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">style</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> href</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://example.com/style.css&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Adds style to the currently rending page</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  props.page.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">script</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> src</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://example.com/script.js&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Adds script to the currently rending page</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{previousRender}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div></li></ul><h4 id="routes-route-coffee" tabindex="-1">Routes (<code>route.coffee</code>) <a class="header-anchor" href="#routes-route-coffee" aria-label="Permalink to &quot;Routes (\`route.coffee\`)&quot;">​</a></h4><p>Routes defined in <code>route.coffee</code> handle incoming requests and direct them to appropriate pages or components based on the URL and route parameters. They also receive <code>props</code>, which exclude the <code>page</code> attribute. Here’s how it might look:</p><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Example in route.coffee</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (req, props) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props.url)    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Outputs current URL</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props.query)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Outputs query parameters</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props.method) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Outputs HTTP method (e.g., GET)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props.params) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Outputs route parameters</span></span></code></pre></div><h3 id="ssr-static-rendering" tabindex="-1">SSR Static Rendering <a class="header-anchor" href="#ssr-static-rendering" aria-label="Permalink to &quot;SSR Static Rendering&quot;">​</a></h3><p><a href="/rew-docs/web.html#page-functions">Static rendering</a>, which means rendering to a static HTML string, can be useful incase you want to make your page completly static when rendered. To do that you can just export this form your <code>page.s.coffee</code>:</p><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> staticRendering</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span></code></pre></div><h3 id="layout-files" tabindex="-1">Layout Files <a class="header-anchor" href="#layout-files" aria-label="Permalink to &quot;Layout Files&quot;">​</a></h3><p>Layout files named <code>layout.s.coffee</code>, <code>layout.s.js</code>, or <code>layout.s.jsx</code> play a crucial role in the <code>serve</code> module, especially when handling Server-Side Rendering (SSR). Here&#39;s a detailed explanation of their purpose and how they interact within the application architecture:</p><h4 id="purpose-of-layout-files" tabindex="-1">Purpose of Layout Files <a class="header-anchor" href="#purpose-of-layout-files" aria-label="Permalink to &quot;Purpose of Layout Files&quot;">​</a></h4><p>Layout files are used to define the structure and common elements that are shared across multiple pages or components within a web application. In the context of the <code>serve</code> module:</p><ul><li><strong>Server-Side Rendering (SSR)</strong>: Layout files (<code>layout.s.*</code>) are employed to encapsulate common HTML structure, such as headers, footers, navigation bars, etc., that should be consistently rendered across different pages.</li></ul><h4 id="exporting-render-function" tabindex="-1">Exporting <code>render</code> Function <a class="header-anchor" href="#exporting-render-function" aria-label="Permalink to &quot;Exporting \`render\` Function&quot;">​</a></h4><p>Each layout file (<code>layout.s.*</code>) is expected to export a <code>render</code> function. This function is essential because:</p><ul><li><p><strong>Composition</strong>: It allows the composition of multiple layout files. Each layout can modify or enhance the content passed to it before passing it to the next layout in the stack.</p></li><li><p><strong>Consistency</strong>: By exporting a <code>render</code> function, layout files adhere to a standardized interface that ensures they can be seamlessly integrated into the SSR rendering pipeline.</p></li></ul><h4 id="rendering-stack" tabindex="-1">Rendering Stack <a class="header-anchor" href="#rendering-stack" aria-label="Permalink to &quot;Rendering Stack&quot;">​</a></h4><p>When handling a page that requires SSR and utilizes layout files:</p><ol><li><p><strong>Finding Layout Files</strong>: The application identifies and collects relevant layout files (<code>layout.s.*</code>) based on their presence in the directory structure relative to the main page file (<code>page.s.*</code>).</p></li><li><p><strong>Rendering Order</strong>: Layout files are rendered in reverse order, starting from the outermost layout to the innermost. This approach allows each layout to wrap its content with additional markup or functionality.</p></li><li><p><strong>Data Propagation</strong>: The <code>render</code> function of each layout receives data and content from the preceding layout or the main page file. It processes this data, potentially modifying or enhancing it, and then passes it down to the next layout in the stack.</p></li><li><p><strong>Final Output</strong>: The final HTML content, after being processed by all relevant layout files, represents the fully rendered page content. This content is then sent as a response to the client&#39;s request.</p></li></ol><h4 id="example-scenario" tabindex="-1">Example Scenario <a class="header-anchor" href="#example-scenario" aria-label="Permalink to &quot;Example Scenario&quot;">​</a></h4><p>Consider a scenario where a web application has the following files:</p><ul><li><code>page.s.coffee</code>: Represents the main page that requires SSR.</li><li><code>./layout.s.coffee</code>: An outer layout file providing a common header and footer structure.</li><li><code>../layout.s.coffee</code>: A nested layout file providing additional navigation elements.</li></ul><p>Here&#39;s how the rendering stack might look:</p><ul><li><code>page.s.coffee</code> imports <code>./layout.s.coffee</code>.</li><li><code>./layout.s.coffee</code> imports <code>../layout.s.coffee</code>.</li></ul><p>The sequence of rendering would be:</p><ol><li><p><strong><code>page.s.coffee</code></strong>:</p><ul><li>Executes its own SSR logic and prepares initial content.</li></ul></li><li><p><strong><code>./layout.s.coffee</code></strong>:</p><ul><li>Imports <code>page.s.coffee</code> and receives its content.</li><li>Executes its <code>render</code> function, potentially modifying or enhancing the content from <code>page.s.coffee</code>.</li><li>Passes the updated content to <code>../layout.s.coffee</code>.</li></ul></li><li><p><strong><code>../layout.s.coffee</code></strong>:</p><ul><li>Imports <code>./layout.s.coffee</code> and receives its content.</li><li>Executes its <code>render</code> function, further modifying or enhancing the content.</li><li>Produces the final HTML output, including all layout elements and the content from <code>page.s.coffee</code>.</li></ul></li></ol><h3 id="svr-router-options" tabindex="-1"><code>Svr::router(options)</code> <a class="header-anchor" href="#svr-router-options" aria-label="Permalink to &quot;\`Svr::router(options)\`&quot;">​</a></h3><p>Creates a new router for defining custom routes. More about the routers in here: <a href="https://itty.dev/itty-router/" target="_blank" rel="noreferrer">IttyRouter</a></p><h4 id="parameters-2" tabindex="-1">Parameters: <a class="header-anchor" href="#parameters-2" aria-label="Permalink to &quot;Parameters:&quot;">​</a></h4><ul><li><strong><code>options</code></strong>: An object with the following properties: <ul><li><strong><code>id</code></strong>: (Optional) The ID of the router.</li><li><strong><code>type</code></strong>: (Optional) Type of the router: <code>&quot;auto&quot;</code>, <code>&quot;normal&quot;</code>, or <code>&quot;default&quot;</code>.</li><li><strong>Other properties</strong>: (Optional) Additional properties for router configuration.</li></ul></li></ul><h4 id="returns-2" tabindex="-1">Returns: <a class="header-anchor" href="#returns-2" aria-label="Permalink to &quot;Returns:&quot;">​</a></h4><ul><li>A <code>ModuleServeRouter</code> instance for managing routes.</li></ul><h4 id="example-2" tabindex="-1">Example: <a class="header-anchor" href="#example-2" aria-label="Permalink to &quot;Example:&quot;">​</a></h4><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">router</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">router</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;main&#39;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;normal&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">router.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/api/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (req) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Hello API&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">server</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> routers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [router], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fetch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;router&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># or you can use: </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># server = Svr::create fetch: router.fetch</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .listen</span></span></code></pre></div><h2 id="built-in-helpers" tabindex="-1">Built-in Helpers <a class="header-anchor" href="#built-in-helpers" aria-label="Permalink to &quot;Built-in Helpers&quot;">​</a></h2><h4 id="svr-text-string-options" tabindex="-1"><code>Svr::text(string, options)</code> <a class="header-anchor" href="#svr-text-string-options" aria-label="Permalink to &quot;\`Svr::text(string, options)\`&quot;">​</a></h4><p>Returns a plain text response.</p><h4 id="example-3" tabindex="-1">Example: <a class="header-anchor" href="#example-3" aria-label="Permalink to &quot;Example:&quot;">​</a></h4><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Plain text response&quot;</span></span></code></pre></div><h4 id="svr-json-object-options" tabindex="-1"><code>Svr::json(object, options)</code> <a class="header-anchor" href="#svr-json-object-options" aria-label="Permalink to &quot;\`Svr::json(object, options)\`&quot;">​</a></h4><p>Returns a JSON response.</p><h4 id="example-4" tabindex="-1">Example: <a class="header-anchor" href="#example-4" aria-label="Permalink to &quot;Example:&quot;">​</a></h4><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;value&quot;</span></span></code></pre></div><h4 id="svr-html-string-options" tabindex="-1"><code>Svr::html(string, options)</code> <a class="header-anchor" href="#svr-html-string-options" aria-label="Permalink to &quot;\`Svr::html(string, options)\`&quot;">​</a></h4><p>Returns an HTML response.</p><h4 id="example-5" tabindex="-1">Example: <a class="header-anchor" href="#example-5" aria-label="Permalink to &quot;Example:&quot;">​</a></h4><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">html</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&lt;h1&gt;Hello, World!&lt;/h1&gt;&quot;</span></span></code></pre></div><h4 id="svr-status-code-options" tabindex="-1"><code>Svr::status(code, options)</code> <a class="header-anchor" href="#svr-status-code-options" aria-label="Permalink to &quot;\`Svr::status(code, options)\`&quot;">​</a></h4><p>Sets the HTTP status code.</p><h4 id="example-6" tabindex="-1">Example: <a class="header-anchor" href="#example-6" aria-label="Permalink to &quot;Example:&quot;">​</a></h4><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">status</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 404</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Not Found&quot;</span></span></code></pre></div><h2 id="full-example" tabindex="-1">Full example <a class="header-anchor" href="#full-example" aria-label="Permalink to &quot;Full example&quot;">​</a></h2><p>A simple example to showcase the usage of <code>serve</code></p><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> imp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;serve&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">router  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;hello&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">html</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&lt;b&gt;Hello!&lt;/b&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">myJson</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (req) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">done</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Svr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> fetch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> router.fetch</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">svr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .listen</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Listening on $port&#39;</span></span></code></pre></div>`,109),l=[n];function h(r,p,o,d,k,c){return e(),i("div",null,l)}const E=s(t,[["render",h]]);export{u as __pageData,E as default};
